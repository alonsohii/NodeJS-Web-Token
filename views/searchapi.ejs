<html>

<head>
    <title>
        <%= title %>
    </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
    <script type="text/javascript" src="http://alasql.org/codex/lib/alasql/alasql.min.js"></script>
    <script type="text/javascript" src=" https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.15.0/jquery.validate.min.js"></script>

    <script type="text/javascript" src=" ../js/adicional.js"></script>

    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js'></script>

    <!--[if IE]>
<script type="text/javascript " src="../js/angular.min.js "></script>
<![endif]-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="../css/adicional.css">
    <link rel="stylesheet" href="../css/search.css">
    <script src="/socket.io/socket.io.js "></script>
    <script type="text/javascript" src="../js/app.js "></script>
    <script type="text/javascript" src="../js/angularjs.js "></script>

    <style type="text/css">
        body {
            /* background:linear-gradient(#014576,#0B7AA7,#4CB1A3,#B1DB91)no-repeat;
  background-size:cover;
  overflow-x: hidden;*/
        }
    </style>
    <script>
        /*

                (function() {

                    angular.module('app')

                        .controller('MainCtrl', ['$scope', '$http', function($scope, $http) {
                            $scope.main = {
                                page: 1,
                                take: 15
                            };

                            $scope.loadPage = function() {
                                // You could use Restangular here with a route resource.
                                $http.get('http://localhost:8080/projects').success(function(data){
                                    // users from your api

                                    $scope.main.users = data;

                                    // number of pages of users
                                    $socpe.main.pages = 10;
                                });
                            };

                            $scope.nextPage = function() {
                                if ($scope.main.page < $scope.main.pages) {
                                    $scope.main.page++;
                                    $scope.loadPage();
                                }
                            };

                            $scope.previousPage = function() {
                                if ($scope.main.page > 1) {
                                    $scope.main.page--;
                                    $scope.loadPage();
                                }
                            };
                        }]);

                });*/
    </script>
    <script>
        $(document).ready(function() {
            $("#Notificacion").hide();
            $("#Correcto").hide();
            $("#login").click(function() { //debugger;
                $.post("http://localhost:8080/api/authenticate", {
                        name: $('#email').val(),
                        password: $('#pw').val()
                    })
                    .done(function(data) {

                        if (data.success) {

                            localStorage.setItem('tk', data.token);
                            window.location = "/home";

                        } else {
                            $("#Notificacion").hide(350);
                            $("#Notificacion").show(350);
                            $("#textnot").text("Error:Su correo o usuario no son correctos.");
                        }

                    })
                    .fail(function() {

                    })

            });

        });


        $(document).on('click', '#botonx', function () {
           debugger;
        });


        function openProyecto(str) {
            debugger;
            location.href = '/project/' + str;
        }
    </script>

</head>

<body>
    <%- include('header'); %>
        <div class="container ">

            <script type="text/javascript">
                var pager = new Imtech.Pager();
                $(document).ready(function() {
                    $.get('http://localhost:8080/searchapi?q=' + 'fijolitos', function(data, status) {

                    });
                });

                $(document).on('submit', '#formsearch', function(data) {

                    $.get('http://localhost:8080/searchapi?q=' + $(this).children('#buscador').val(), function(data, status) {
                        $('#content').html('');

                        $.when(
                            $.each(data, function(index, element) {
                                $('#content').append('<div class="subscribe">' +
                                    '<p> ' + element.nombre + ' </p>' +
                                    '<div data-id='+element.urlproyecto+' >  ' + element.descripcioncorta + '  </div><br>' +
                                    '<button   id="botonx">Postularme</button>  </div>');

                            })

                        ).then(function(x) {
                            pager.paragraphsPerPage = 10; // set amount elements per page
                            pager.pagingContainer = $('#content'); // set of main container
                            pager.paragraphs = $('div.subscribe', pager.pagingContainer); // set of required containers
                            pager.showPage(1);

                        });
                    });
                    return false;
                });
            </script>

            <div id="buscador">
                <form id="formsearch">
                    <input type="text" id="buscador" name="">
                    <input type="submit" value="Buscar">
                </form>

            </div>
            <div class="webSearch">
                <h3><a href="">Proyectos encontrados</a></h3>
                <div id="content">

                </div>
                <div id="pagingControls"></div>
            </div>
            <script type="text/javascript">
                $(document).ready(function() {
                    pager.paragraphsPerPage = 2; // set amount elements per page
                    pager.pagingContainer = $('#content'); // set of main container
                    pager.paragraphs = $('div.subscribe', pager.pagingContainer); // set of required containers
                    pager.showPage(1);
                });
            </script>

        </div>
</body>

</html>